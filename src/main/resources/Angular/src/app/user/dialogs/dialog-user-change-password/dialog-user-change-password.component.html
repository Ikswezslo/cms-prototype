<form [formGroup]="form" autocomplete="off">
  <h2 mat-dialog-title>Zmiana hasła</h2>
  <p>
    <mat-form-field appearance="fill">
      <mat-label>Stare hasło</mat-label>
      <input matInput [type]="'password'" required formControlName="oldPassword" name="oldPassword">
      <mat-error *ngIf="form.controls.oldPassword.hasError('required')">To pole jest wymagane</mat-error>
    </mat-form-field>
  </p>
  <br>
  <p>
    <mat-form-field appearance="fill">
      <mat-label>Nowe hasło</mat-label>
      <input matInput [type]="'password'" required formControlName="newPassword" name="newPassword"
             pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}">
      <mat-error *ngIf="form.controls.newPassword.hasError('required')">To pole jest wymagane</mat-error>
      <mat-error *ngIf="form.controls.newPassword.hasError('pattern')">
        Hasło musi posiadać co najmniej jedną cyfrę, małą i dużą literę oraz przynajmniej 8 znaków.
      </mat-error>
    </mat-form-field>
  </p>
  <p>
    <mat-form-field appearance="fill">
      <mat-label>Potwierdź hasło</mat-label>
      <input matInput [type]="'password'" required formControlName="confirmPassword" [errorStateMatcher]="matcher"
             name="confirmPassword">
      <mat-error *ngIf="form.hasError('notSame')">Hasła muszą być takie same</mat-error>
    </mat-form-field>
  </p>
  <mat-dialog-actions>
    <button mat-button [mat-dialog-close]="undefined">Anuluj</button>
    <button mat-button (click)="changePassword(form.controls.oldPassword.value, form.controls.newPassword.value)"
            [disabled]="!form.valid">Zatwierdź
    </button>
  </mat-dialog-actions>
</form>

