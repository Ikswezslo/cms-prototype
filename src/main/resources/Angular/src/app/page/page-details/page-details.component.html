<div fxLayout='column' fxLayoutAlign="center center" class="cms-padding cms-layout-gap" *ngIf="page">
  <app-page-card [page]="page" [goToBtn]="false">
    <button mat-button [matMenuTriggerFor]="actions">
      <mat-icon>label_important</mat-icon>
      <span>Akcje</span>
    </button>
  </app-page-card>

  <mat-card fxFlex>
    <div class="ql-container ql-snow" style="border-width: 0;">
      <div class="ql-editor" [innerHtml]="pageHtml"></div>
    </div>
  </mat-card>

  <mat-card fxFlex>
    <mat-card-title>Zasoby strony</mat-card-title>
    <mat-card-content>
      <mat-accordion>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>attachment</mat-icon>
              <span>Dołączone pliki</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <p>Not yet implemented</p>
        </mat-expansion-panel>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>photo_library</mat-icon>
              <span>Wykorzystane zdjęcia</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <p>Not yet implemented</p>
        </mat-expansion-panel>

      </mat-accordion>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="page.parent" fxFlex>
    <mat-card-title>Nadstrona<br></mat-card-title>
    <mat-card-content fxLayout='column' fxLayoutAlign="center start" class="cms-layout-gap">
      <app-page-card [page]="page.parent" [gray]="true"></app-page-card>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="page.children.length" fxFlex>
    <mat-card-title>Podstrony<br></mat-card-title>
    <mat-card-content fxLayout='column' fxLayoutAlign="center start" class="cms-layout-gap">
      <app-page-card *ngFor="let child of page.children" [page]="child" [gray]="true"></app-page-card>
    </mat-card-content>
  </mat-card>
</div>

<mat-menu #actions="matMenu">
  <button *ngIf="page" mat-menu-item [routerLink]="['/page/'+page.id+'/edit']">
    <mat-icon>create</mat-icon>
    <span>Edytuj zawartość</span>
  </button>
  <button mat-menu-item>
    <mat-icon>app_registration</mat-icon>
    <span>Edytuj informacje</span>
  </button>
  <button mat-menu-item>
    <mat-icon>dashboard</mat-icon>
    <span>Pokaż szczegóły</span>
  </button>
  <button mat-menu-item>
    <mat-icon>note_add</mat-icon>
    <span>Dodaj podstronę</span>
  </button>
  <button mat-menu-item>
    <mat-icon>file_copy</mat-icon>
    <span>Stwórz kopię strony</span>
  </button>
  <button mat-menu-item>
    <mat-icon>settings</mat-icon>
    <span>Ustawienia wyświetlania</span>
  </button>
  <button mat-menu-item>
    <mat-icon>visibility_off</mat-icon>
    <span>Ukryj stronę</span>
  </button>
  <button mat-menu-item>
    <mat-icon>delete</mat-icon>
    <span>Usuń stronę</span>
  </button>
</mat-menu>
