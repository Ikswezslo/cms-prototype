<div fxLayout='column' fxLayoutAlign="center center" class="cms-padding cms-layout-gap">
  <div fxFlex fxLayout='row wrap' class="row">
      <mat-card fxFlex="30" fxFlex.lt-md="100">
        <mat-card-title>Dostępne szablony</mat-card-title>
        <mat-card-subtitle *ngIf="isEditMode">Tryb edycji</mat-card-subtitle>
        <mat-card-subtitle *ngIf="!isEditMode">Tryb selekcji</mat-card-subtitle>

        <app-university-selector *ngIf="!isEditMode" (universityChanged)="onUniversityChanged($event)"></app-university-selector>

        <mat-divider inset></mat-divider>
        <mat-card-content>
          <mat-action-list>
              <button *ngFor="let template of templates" [ngClass]="{selected: template.id === selectedTemplate?.id}"
                      mat-list-item (click)="onTemplateClicked(template.id)">
                {{template.name}}
                <mat-icon style="margin-left: auto" *ngIf="template.assigned==true">check_box</mat-icon>
                <mat-icon style="margin-left: auto" *ngIf="template.assigned==false">check_box_outline_blank</mat-icon>
              </button>
          </mat-action-list>
        </mat-card-content >
        <mat-divider inset></mat-divider>
        <mat-card-actions>
          <button *ngIf="isEditMode" mat-button (click)="toggleEditMode()">
            <mat-icon >check_box</mat-icon>
            <span>Tryb selekcji</span>
          </button>
          <button *ngIf="isEditMode" mat-button (click)="onAddTemplate()">
            <mat-icon>add_box</mat-icon>
            <span>Dodaj</span>
          </button>
          <button *ngIf="!isEditMode" mat-button (click)="toggleEditMode()">
            <mat-icon>create</mat-icon>
            <span>Tryb edycji</span>
          </button>
        </mat-card-actions>
      </mat-card>
      <mat-card fxFlex>
        <mat-card-title>Podgląd</mat-card-title>
        <mat-card-subtitle *ngIf="!selectedTemplate">Brak wybranego szablonu</mat-card-subtitle>
        <mat-card-subtitle *ngIf="selectedTemplate">{{selectedTemplate.name}}</mat-card-subtitle>
        <mat-divider inset></mat-divider>
        <mat-card-content>
          <div class="ql-container ql-snow" style="border-width: 0;">
            <div class="ql-editor" [innerHtml]="selectedTemplate?.safeContent"></div>
          </div>
        </mat-card-content>
        <mat-divider inset></mat-divider>
        <mat-card-actions>
          <button *ngIf="isEditMode" mat-button (click)="onEdit()">
            <mat-icon>create</mat-icon>
            <span>Edytuj</span>
          </button>
          <button *ngIf="isEditMode" mat-button>
            <mat-icon>create</mat-icon>
            <span>Zmień nazwę</span>
          </button>
          <button *ngIf="isEditMode" mat-button color="warn" (click)="onDelete()">
            <mat-icon>delete</mat-icon>
            <span>Usuń</span>
          </button>
          <button *ngIf="!isEditMode && selectedTemplate?.assigned==false" mat-button (click)="onAddUniversity()">
            <mat-icon>check_box</mat-icon>
            <span>Dodaj do uniwersytetu</span>
          </button>
          <button *ngIf="!isEditMode && selectedTemplate?.assigned==true" mat-button (click)="onRemoveUniversity()">
            <mat-icon>indeterminate_check_box</mat-icon>
            <span>Usuń z uniwersytetu</span>
          </button>

          <button mat-button disabled="true" [style.z-index]="-1">
            <span>E</span>
          </button>
        </mat-card-actions>
      </mat-card>

  </div>
</div>

